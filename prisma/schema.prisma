// prisma/schema.prisma

datasource db {
  provider = "postgresql" // Como se indica en tu migration_lock.toml
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model ConnectedChannel {
  id             String    @id @default(cuid())
  instanceName   String
  channelTypeId  String    // Ej: "whatsapp", "messenger", "webchat"
  status         String    // Ej: "connected", "disconnected", "pending_webhook"
  webhookUrl     String?
  verifyToken    String?
  details        String?   // Para detalles específicos del canal, podría ser JSON o texto formateado
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  
  // Futuro: Añadir relación con un modelo Tenant si implementamos multi-tenancy completa aquí
  // tenantId    String
  // tenant      Tenant @relation(fields: [tenantId], references: [id])
}

// Futuro: Modelo Tenant (marcador de posición)
// model Tenant {
//   id             String    @id @default(cuid())
//   name           String
//   subdomain      String    @unique
//   createdAt      DateTime  @default(now())
//   updatedAt      DateTime  @updatedAt
//   users          User[]    // Si los usuarios también se gestionan con Prisma
//   channels       ConnectedChannel[]
// }

// Nota: El modelo User de Supabase Auth se gestiona por separado, 
// pero podríamos sincronizar o referenciar usuarios aquí si es necesario.
